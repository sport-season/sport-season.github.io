(this["webpackJsonpstravastat.github.io"]=this["webpackJsonpstravastat.github.io"]||[]).push([[0],{12:function(e,t,n){e.exports={chartSection:"styles_chartSection__8DmAr",chartSectionHeader:"styles_chartSectionHeader__2tvOG",chart:"styles_chart__2Uc27",daysName:"styles_daysName__1EwFv",main:"styles_main__7eyzD",container:"styles_container__1TRtf",empty_point:"styles_empty_point__2GnNm",point:"styles_point__38Ssf",monthsBar:"styles_monthsBar__6batd",month:"styles_month__71ham",m1:"styles_m1__7kJDC",m2:"styles_m2__3EOHO",m3:"styles_m3__2zK2c",m4:"styles_m4__5NGeg",m5:"styles_m5__3oxQC",m6:"styles_m6__1EZ14"}},148:function(e,t,n){},149:function(e,t,n){},451:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n.n(a),c=n(14),s=n.n(c),i=(n(148),n(2)),o=n.n(i),l=n(4),u=n(7),d=(n(149),n(144)),h=["athlete"],j=59766,v="b7893c2f78225337f8ac6852e5c2fe313948c8f7",p="SportSeasonStravaTokenData",b="SportSeasonStravaUserData";function f(){var e={client_id:j,redirect_uri:window.location.origin,response_type:"code",approval_prompt:"auto",scope:"activity:read"},t=new URLSearchParams(e);return"https://www.strava.com/oauth/authorize?".concat(t.toString())}function m(){return O.apply(this,arguments)}function O(){return(O=Object(l.a)(o.a.mark((function e(){var t,n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=localStorage.getItem(p))||!t.length){e.next=20;break}if(!((n=JSON.parse(t)).expires_at&&1e3*n.expires_at>Date.now())){e.next=5;break}return e.abrupt("return",n.access_token);case 5:if(!n.refresh_token){e.next=17;break}return e.prev=6,e.next=9,fetch("https://www.strava.com/api/v3/oauth/token",{body:new URLSearchParams({client_id:j,client_secret:v,refresh_token:n.refresh_token,grant_type:"refresh_token"}).toString(),headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST"}).then((function(e){return e.json()}));case 9:return a=e.sent,localStorage.setItem(p,JSON.stringify(a)),e.abrupt("return",a.access_token);case 14:throw e.prev=14,e.t0=e.catch(6),new Error(e.t0);case 17:throw new Error("no token");case 20:throw new Error("no stored token data");case 21:case"end":return e.stop()}}),e,null,[[6,14]])})))).apply(this,arguments)}function _(e){return x.apply(this,arguments)}function x(){return(x=Object(l.a)(o.a.mark((function e(t){var n,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://www.strava.com/api/v3/oauth/token",{body:new URLSearchParams({client_id:j,client_secret:v,code:t,grant_type:"authorization_code"}).toString(),headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST"}).then((function(e){return e.json()}));case 3:return n=e.sent,console.log({result:n}),a=n.athlete,r=Object(d.a)(n,h),localStorage.setItem(b,JSON.stringify(a)),localStorage.setItem(p,JSON.stringify(r)),e.abrupt("return",n.access_token);case 11:throw e.prev=11,e.t0=e.catch(0),new Error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function g(){return(g=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"",e.prev=1,e.next=4,fetch("https://www.strava.com/oauth/deauthorize?".concat(new URLSearchParams({access_token:""}).toString()),{method:"POST"}).then((function(e){return e.json()}));case 4:return localStorage.removeItem(p),localStorage.removeItem(b),e.abrupt("return",Promise.resolve({success:!0}));case 9:throw e.prev=9,e.t0=e.catch(1),new Error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function w(){return JSON.parse(localStorage.getItem(b))}var y=n(61),S=n.n(y),D=n(1),k=function(e){var t=w();return Object(D.jsxs)("div",{className:S.a.prof,children:[Object(D.jsx)("img",{src:t.profile_medium,className:S.a.ava}),Object(D.jsxs)("div",{className:S.a.name,children:[t.lastname,Object(D.jsx)("strong",{children:t.firstname})]})]})},N=n(60),C=n(15),I=n(48),z=n(137),T=n.n(z),E=n(143),A=n(138),M=n(139),B=n(142),L=new(function(){function e(t,n){Object(A.a)(this,e),this.init(t,n)}return Object(M.a)(e,[{key:"init",value:function(){var e=Object(l.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(B.a)(t,n,{upgrade:function(e){e.createObjectStore("activities",{keyPath:"id"}).createIndex("start_date","start_date")}});case 2:this.db=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"addActivities",value:function(e){var t=this.db.transaction("activities","readwrite");t.objectStore("activities");return Array.isArray(e)?Promise.all([].concat(Object(E.a)(e.map((function(e){return t.store.add(e)}))),[t.done])):t.add("activities",e)}},{key:"getAllActivity",value:function(){return this.db.transaction("activities").objectStore("activities").getAll()}}]),e}())("stravastat",1);function P(e,t,n){return F.apply(this,arguments)}function F(){return(F=Object(l.a)(o.a.mark((function e(t,n,a){var r,c,s=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>3&&void 0!==s[3]?s[3]:1,c=s.length>4&&void 0!==s[4]?s[4]:100,e.next=4,fetch("https://www.strava.com/api/v3/athlete/activities?before=".concat(a,"&after=").concat(n,"&page=").concat(r,"&per_page=").concat(c),{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(151);function H(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return"-";var n=e>1e3?[parseFloat(e/1e3).toFixed(2),"\u043a\u043c"]:[parseFloat(e).toFixed(2),"\u043c"];return t?n:n.join("\u202f")}var R=n(90),J=n.n(R),Z=function(e){var t=e.activity,n=Date.parse(t.start_date_local)-1e3*t.utc_offset,a=new Date(n),r=new Date(n+1e3*t.elapsed_time),c=new Date(1e3*(t.moving_time-t.utc_offset));return Object(D.jsxs)("a",{href:"https://www.strava.com/activities/".concat(t.id),target:"_blank",className:J.a.item,children:[Object(D.jsxs)("div",{className:J.a.row,children:[Object(D.jsx)("strong",{children:t.name}),Object(D.jsx)("strong",{children:H(t.distance)})]}),Object(D.jsxs)("small",{children:[a.toLocaleString().substr(0,17),"-",a.toLocaleDateString()!==r.toLocaleDateString()&&r.toLocaleDateString(),r.toLocaleTimeString().substr(0,5),", \u0432 \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u0438: ",c.toLocaleTimeString().substr(0,5)]}),Object(D.jsx)("br",{}),"\u0412\u044b\u0441\u043e\u0442\u0430 \u043c\u0430\u043a\u0441: ",t.elev_high,", \u043c\u0438\u043d: ",t.elev_low,";"," ",t.average_heartrate&&Object(D.jsxs)(D.Fragment,{children:["\u041f\u0443\u043b\u044c\u0441: \u0441\u0440\u0435\u0434\u043d: ",t.average_heartrate,", \u043c\u0430\u043a\u0441: ",t.max_heartrate,";"]})," ","\u0421\u0440\u0435\u0434\u043d\u044f\u044f \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u044c ",t.average_speed,";"]})};var U,V=n(62),G=n.n(V),Q=function(e){var t=e.title,n=e.children,a=e.unit;return Object(D.jsxs)("div",{className:G.a.card,children:[Object(D.jsx)("h3",{className:G.a.cardTitle,children:t}),Object(D.jsxs)("div",{className:G.a.cardContent,children:[n,a&&Object(D.jsxs)(D.Fragment,{children:["\u2009",Object(D.jsx)("small",{children:a})]})]})]})},q=n(63),Y=n.n(q),K=Object(a.createContext)(null),X=n(12),W=n.n(X),$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:600;return clearTimeout(U),new Promise((function(t){U=setTimeout((function(){return t()}),e)}))},ee=n(91),te=n.n(ee),ne=function(e){var t=e.children,n=e.onClose;return Object(a.useEffect)((function(){return document.body.style.overflow="hidden",function(){return document.body.style.overflow=""}}),[]),Object(D.jsx)("div",{className:te.a.overlay,onClick:n,children:Object(D.jsx)("div",{className:te.a.modal,onClick:function(e){return e.stopPropagation()},children:t})})},ae=function(e){!function(e){var t=document.createElement("div");document.body.appendChild(t),c.render(Object(D.jsx)(ne,Object(C.a)(Object(C.a)({},e),{},{onClose:function(){return document.body.removeChild(t)}})),t)}({children:Object(D.jsx)("div",{children:e.acts.map((function(e){return Object(D.jsx)(Z,{activity:e},e.id)}))})})},re=function(e){var t=e.activities,n=Object(a.useState)(+localStorage.getItem("stravastatZoom")||14),r=Object(u.a)(n,2),c=r[0],s=r[1];if(Object(a.useEffect)(Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",localStorage.setItem("stravastatZoom",c));case 1:case"end":return e.stop()}}),e)}))),[c]),!t[0])return"\ud83d\udc31\u200d\ud83d\ude80";for(var i=new Date(Date.parse(t[0].start_date)),d=new Date(Date.parse(t[t.length-1].start_date)),h=0===i.getDay()?6:i.getDay()-1,j=[],v=[],p=i.getTime(),b=0;p<d.getTime();){var f=t.filter((function(e){return new Date(Date.parse(e.start_date)).toISOString().substr(0,10)===new Date(p).toISOString().substr(0,10)}));6===new Date(p).getDay()&&(b+=1),new Date(p).getMonth()!==new Date(p+864e5).getMonth()&&(v.push({m:new Date(p).toISOString().substr(0,7),w:b}),b=0),j.push({date:p,cou:f.length,acts:f,dist:f.reduce((function(e,t){return t.distance+e}),0)}),p+=864e5}v.push({m:new Date(p).toISOString().substr(0,7),w:b}),b=0;var m=j.filter((function(e){return e.dist>0})),O=(m.reduce((function(e,t){return e.dist<t.dist?e.dist:t.dist})),m.reduce((function(e,t){return e.dist>t.dist?e.dist:t.dist}))),_=function(e){return Object(l.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$(300);case 2:s((function(t){return t+e}));case 3:case"end":return t.stop()}}),t)})))};return Object(D.jsxs)("section",{className:W.a.chartSection,children:[Object(D.jsxs)("header",{className:W.a.chartSectionHeader,children:[Object(D.jsx)("h3",{children:"\u041a\u0430\u0440\u0442\u0430 \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438"}),Object(D.jsxs)("div",{children:[Object(D.jsx)("button",{onClick:_(2),children:Object(D.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-zoom-in",viewBox:"0 0 16 16",children:[Object(D.jsx)("path",{"fill-rule":"evenodd",d:"M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z"}),Object(D.jsx)("path",{d:"M10.344 11.742c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1 6.538 6.538 0 0 1-1.398 1.4z"}),Object(D.jsx)("path",{"fill-rule":"evenodd",d:"M6.5 3a.5.5 0 0 1 .5.5V6h2.5a.5.5 0 0 1 0 1H7v2.5a.5.5 0 0 1-1 0V7H3.5a.5.5 0 0 1 0-1H6V3.5a.5.5 0 0 1 .5-.5z"})]})}),Object(D.jsx)("button",{onClick:_(-2),children:Object(D.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-zoom-out",viewBox:"0 0 16 16",children:[Object(D.jsx)("path",{"fill-rule":"evenodd",d:"M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z"}),Object(D.jsx)("path",{d:"M10.344 11.742c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1 6.538 6.538 0 0 1-1.398 1.4z"}),Object(D.jsx)("path",{"fill-rule":"evenodd",d:"M3 6.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5z"})]})})]})]}),Object(D.jsxs)("div",{className:W.a.chart,style:{fontSize:c+"px"},children:[Object(D.jsxs)("div",{className:W.a.daysName,children:[Object(D.jsx)("div",{children:Object(D.jsx)("small",{children:"\u043f\u043d"})}),Object(D.jsx)("div",{children:Object(D.jsx)("small",{children:"\u0432\u0442"})}),Object(D.jsx)("div",{children:Object(D.jsx)("small",{children:"\u0441\u0440"})}),Object(D.jsx)("div",{children:Object(D.jsx)("small",{children:"\u0447\u0442"})}),Object(D.jsx)("div",{children:Object(D.jsx)("small",{children:"\u043f\u0442"})}),Object(D.jsx)("div",{children:Object(D.jsx)("small",{children:"\u0441\u0431"})}),Object(D.jsx)("div",{children:Object(D.jsx)("small",{children:"\u0432\u0441"})})]}),Object(D.jsxs)("div",{className:W.a.main,children:[Object(D.jsx)("div",{className:W.a.monthsBar,children:v.map((function(e){return Object(D.jsx)("div",{className:W.a.month+" "+W.a["m"+e.w],children:Object(D.jsx)("small",{children:e.m})},e.m)}))}),Object(D.jsxs)("div",{className:W.a.container,children:[h>0&&new Array(h).fill(!0).map((function(e,t){return Object(D.jsx)("div",{className:W.a.empty_point},t)})),j.map((function(e,t){return Object(D.jsx)("div",{title:new Date(e.date),className:e.cou>0?W.a.point:W.a.empty_point,style:e.dist>0?{backgroundColor:"rgba(252,82,0,".concat(e.dist/O,")")}:{},onClick:e.dist>0?function(){return ae(e)}:function(){},children:Object(D.jsx)("small",{children:new Date(e.date).getDate()})},e.date)}))]})]})]})]})},ce=function(e){var t=e.distance,n=e.elev_high,a=e.elev_low,r=e.moving_time,c=H(t,!0),s=Object(u.a)(c,2),i=s[0],o=s[1],l=H(n,!0),d=Object(u.a)(l,2),h=d[0],j=d[1],v=H(a,!0),p=Object(u.a)(v,2),b=p[0],f=p[1];return Object(D.jsxs)("section",{style:{display:"flex",marginTop:"10px",padding:"10px"},children:[Object(D.jsx)(Q,{title:"\u0414\u0438\u0441\u0442\u0430\u043d\u0446\u0438\u044f",unit:o,children:i}),Object(D.jsx)(Q,{title:"\u041d\u0430\u0431\u043e\u0440",unit:j,children:h}),Object(D.jsx)(Q,{title:"\u0421\u0431\u0440\u043e\u0441",unit:f,children:b}),Object(D.jsx)(Q,{title:"\u0412 \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u0438",unit:"\u0447",children:(r/60/60).toFixed(2)})]})},se=new Date,ie=new Date(se.getFullYear(),0,1,4,0,0,1),oe=new Date(se.getFullYear(),11,31,23,59,59,999),le=function(e){var t=e.token,n=Object(a.useState)(localStorage.getItem("stravastatD1")||ie.toISOString().substr(0,10)),r=Object(u.a)(n,2),c=r[0],s=r[1],i=Object(a.useState)(localStorage.getItem("stravastatD2")||oe.toISOString().substr(0,10)),d=Object(u.a)(i,2),h=d[0],j=d[1],v=Object(a.useState)([]),p=Object(u.a)(v,2),b=p[0],f=p[1],m=Object(a.useState)(!1),O=Object(u.a)(m,2),_=O[0],x=O[1],g=Object(a.useState)(localStorage.getItem("stravastatType")||""),w=Object(u.a)(g,2),y=w[0],S=w[1],k=Object(a.useState)(null),z=Object(u.a)(k,2),E=z[0],A=z[1],M=Object(a.useRef)(),B=Object(a.useRef)(),F=Object(a.useContext)(K);Object(a.useEffect)((function(){L.getAllActivity().then((function(e){A(e),e.length||V()}))}),[]),Object(a.useEffect)(Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",localStorage.setItem("stravastatD1",c));case 1:case"end":return e.stop()}}),e)}))),[c]),Object(a.useEffect)(Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",localStorage.setItem("stravastatD2",h));case 1:case"end":return e.stop()}}),e)}))),[h]),Object(a.useEffect)((function(){return localStorage.setItem("stravastatType",y)}),[y]),Object(a.useEffect)((function(){(null===E||void 0===E?void 0:E.length)&&f(E.reduce((function(e,t){var n=t.type;return Object(C.a)(Object(C.a)({},e),{},Object(N.a)({},n,(e[n]||0)+1))}),{}))}),[E]),Object(a.useEffect)((function(){if(null===B||void 0===B?void 0:B.current){(null===M||void 0===M?void 0:M.current)||(M.current=I.map(B.current,{fullscreenControl:!0}).setView([53.20066,45.00464],12),I.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'Map data \xa9 <a href="http://openstreetmap.org">OpenStreetMap</a> contributors',maxZoom:20,id:"osm"}).addTo(M.current));var e,t=[];(e=M.current).eachLayer((function(t){var n=!(t.getAttribution&&t.getAttribution()),a=!t.getAttribution;(n||a)&&e.removeLayer(t)}));var n=E&&E.filter((function(e){var t=Date.parse(e.start_date_local),n=Date.parse(c),a=Date.parse(h);return(!y||e.type===y)&&t>=n&&t<=a}));null===n||void 0===n||n.forEach((function(e){var n=e.map.summary_polyline;if(null===n||void 0===n?void 0:n.length){var a=T.a.decode(n);I.polyline(a).setStyle({color:"rgba(255, 0, 0,0.5)"}).addTo(M.current),t.push(a)}}));var a=I.latLngBounds(t);(null===t||void 0===t?void 0:t.length)&&M.current.fitBounds(a)}}),[B.current,E,y,c,h]);var H=E&&E.filter((function(e){var t=Date.parse(e.start_date_local),n=Date.parse(c),a=Date.parse(h);return(!y||e.type===y)&&t>=n&&t<=a})),R=null===H||void 0===H?void 0:H.reduce((function(e,t){return{distance:e.distance+t.distance,elev_high:e.elev_high+t.elev_high||0,elev_low:e.elev_low+t.elev_low||0,elapsed_time:e.elapsed_time+t.elapsed_time,moving_time:e.moving_time+t.moving_time}}),{distance:0,elev_high:0,elev_low:0,elapsed_time:0,moving_time:0}),J=function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.value,e.next=3,$();case 3:s(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.value,e.next=3,$();case 3:j(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function V(){return G.apply(this,arguments)}function G(){return(G=Object(l.a)(o.a.mark((function e(){var n,a,r,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(!0),r=(null===(n=a=E)||void 0===n?void 0:n.length)?new Date(Date.parse(a[a.length-1].start_date)):new Date(Date.parse(F.created_at)),c=0;case 4:if(!(0===c||(null===(s=a)||void 0===s?void 0:s.length)>0)){e.next=16;break}return c++,console.log("page",c),e.next=9,P(t,Math.floor(r.getTime()/1e3),Math.floor((new Date).getTime()/1e3),c,50);case 9:return a=e.sent,console.time("addDB"),e.next=13,L.addActivities(a).catch((function(e){return console.error(e)}));case 13:console.timeEnd("addDB"),e.next=4;break;case 16:x(!1);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(D.jsxs)("div",{children:[Object(D.jsx)("button",{className:Y.a.floatButton,disabled:_,onClick:V,children:Object(D.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",viewBox:"0 0 16 16",children:[Object(D.jsx)("path",{d:"M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z"}),Object(D.jsx)("path",{d:"M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3zM3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9H3.1z"})]})}),Object(D.jsxs)("div",{className:Y.a.form,children:[Object(D.jsxs)("div",{className:Y.a.dates,children:[Object(D.jsx)("input",{type:"date",value:c,min:F.created_at.substr(0,10),max:h.substr(0,10),onChange:J}),"-",Object(D.jsx)("input",{type:"date",value:h,min:c.substr(0,10),max:(new Date).toISOString().substr(0,10),onChange:U})]})," \xa0 ",Object(D.jsxs)("select",{onChange:function(e){return S(e.target.value)},value:y,children:[Object(D.jsx)("option",{value:"",children:"\u0412\u0441\u0435 \u0432\u0438\u0434\u044b \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0435\u0439"}),b&&Object.entries(b).map((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(D.jsxs)("option",{value:n,children:[n," (",a,")"]},n)}))]})]}),R&&Object(D.jsx)(ce,{distance:R.distance,elev_high:R.elev_high,elev_low:R.elev_low,moving_time:R.moving_time}),(null===H||void 0===H?void 0:H.length)>0&&Object(D.jsx)(re,{activities:H}),!E&&"loading...",H&&Object(D.jsx)("div",{ref:B,style:{height:"300px"}}),Object(D.jsx)("section",{children:H&&H.map((function(e){return Object(D.jsx)(Z,{activity:e},e.id)}))})]})};var ue=function(){var e=Object(a.useState)(null),t=Object(u.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(null),s=Object(u.a)(c,2),i=s[0],d=s[1];return Object(a.useEffect)((function(){var e=new URLSearchParams(window.location.search).get("code");if(null===e||void 0===e?void 0:e.length)return function(){var t=Object(l.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_(e);case 3:window.history.pushState({},"","/"),window.location.reload(),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),d(t.t0.message),window.location.href=f();case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}()();(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m();case 3:t=e.sent,r(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(D.jsxs)("div",{className:"App",children:[i&&Object(D.jsx)("p",{children:i}),n&&Object(D.jsxs)(K.Provider,{value:w(),children:[Object(D.jsxs)("header",{className:"header",children:[Object(D.jsx)(k,{}),Object(D.jsx)("button",{onClick:function(){return function(){return g.apply(this,arguments)}().then((function(){return window.location.reload()}))},children:"\u0412\u044b\u0439\u0442\u0438"})]}),Object(D.jsx)(le,{token:n})]}),!n&&Object(D.jsx)("section",{className:"hello",children:Object(D.jsxs)("p",{align:"center",children:["\u042d\u0442\u043e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043f\u043e\u043a\u0430\u0436\u0435\u0442",Object(D.jsx)("br",{}),"\u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0443 \u0432\u0430\u0448\u0438\u0445 \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0435\u0439",Object(D.jsx)("br",{}),"\u0432 \u043d\u043e\u0432\u043e\u043c \u0432\u0438\u0434\u0435 \ud83d\ude0e",Object(D.jsx)("br",{}),Object(D.jsx)("br",{}),"\u0414\u043b\u044f \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0435\u043d\u0438\u044f \u043d\u0443\u0436\u043d\u043e",Object(D.jsx)("br",{}),Object(D.jsx)("button",{className:"bigButton",onClick:function(){return window.location.href=f()},children:"\u0412\u043e\u0439\u0442\u0438 \u0432 Strava"})]})})]})};s.a.render(Object(D.jsx)(r.a.StrictMode,{children:Object(D.jsx)(ue,{})}),document.getElementById("root"))},61:function(e,t,n){e.exports={ava:"styles_ava__3g67r",prof:"styles_prof__2-c8f",name:"styles_name__3BqxZ"}},62:function(e,t,n){e.exports={card:"styles_card__1Zhz5",cardTitle:"styles_cardTitle__2lbDP",cardContent:"styles_cardContent__2_jID"}},63:function(e,t,n){e.exports={form:"styles_form__3iSXe",dates:"styles_dates__tZmqb",floatButton:"styles_floatButton__17FMM",rotation:"styles_rotation__2Fv_j"}},90:function(e,t,n){e.exports={item:"styles_item__1z28u",row:"styles_row__aRxr4"}},91:function(e,t,n){e.exports={overlay:"styles_overlay__3eQZi",modal:"styles_modal__2irQs"}}},[[451,1,2]]]);
//# sourceMappingURL=main.f87bef3c.chunk.js.map